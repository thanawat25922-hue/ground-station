<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Ground Station</title>

<!-- Leaflet -->
<link rel="stylesheet"
 href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<!-- Chart -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>

body{
    margin:0;
    font-family:Arial, Helvetica, sans-serif;
    background:#071426;
    color:white;
    overflow:hidden;
}

.container{
    display:grid;
    grid-template-columns:1fr 1fr;
    grid-template-rows:50vh 50vh;
    height:100vh;
    gap:8px;
    padding:8px;
    box-sizing:border-box;
}

.panel{
    background:#0b1e33;
    border-radius:10px;
    padding:15px;
    box-shadow:0 0 10px rgba(0,0,0,0.4);
    overflow:hidden;
}

h2{
    margin-top:0;
}

/* TELEMETRY */
.telemetry-table{
    width:100%;
    border-collapse:collapse;
    font-size:14px;
}

.telemetry-table td{
    padding:7px;
    border-bottom:1px solid rgba(255,255,255,0.1);
}

.value{
    text-align:right;
    color:#00ff9c;
    font-weight:bold;
}

/* GRAPH */
.graph-controls{
    margin-bottom:10px;
}

.graph-controls button{
    background:#071426;
    border:1px solid #00ff9c;
    color:#00ff9c;
    padding:6px 12px;
    margin-right:6px;
    cursor:pointer;
}

.graph-controls button:hover{
    background:#00ff9c;
    color:black;
}

.graph-container{
    position:relative;
    width:100%;
    height:calc(100% - 45px);
}

.graph-container canvas{
    position:absolute;
    width:100% !important;
    height:100% !important;
}

/* MAP */
#map{
    width:100%;
    height:100%;
    border-radius:10px;
}

/* RESERVED */
.reserved{
    display:flex;
    justify-content:center;
    align-items:center;
    font-size:28px;
    opacity:0.3;
}

</style>
</head>

<body>

<div class="container">

<!-- TELEMETRY -->
<div class="panel">
<h2>Telemetry</h2>
<table class="telemetry-table">
<tr><td>TEAM ID</td><td class="value">G2</td><td>MISSION TIME</td><td class="value">00:02:31</td></tr>
<tr><td>PACKET COUNT</td><td class="value">21</td><td>MODE</td><td class="value">FLIGHT</td></tr>
<tr><td>VOLTAGE</td><td class="value">6.74 V</td><td>STATE</td><td class="value">ASCENT</td></tr>
<tr><td>ALTITUDE</td><td class="value">179.9 m</td><td>PRESSURE</td><td class="value">998.2 hPa</td></tr>
<tr><td>TEMPERATURE</td><td class="value">23.3 °C</td><td>HUMIDITY</td><td class="value">54 %</td></tr>
<tr><td>GPS LONGITUDE</td><td class="value">100.776348</td><td>GPS LATITUDE</td><td class="value">13.732862</td></tr>
</table>
</div>

<!-- GRAPH -->
<div class="panel">
<h2>Graphs</h2>

<div class="graph-controls">
<button onclick="showGraph('alt')">Altitude</button>
<button onclick="showGraph('temp')">Temperature</button>
<button onclick="showGraph('press')">Pressure</button>
<button onclick="showGraph('volt')">Voltage</button>
</div>

<div class="graph-container">
<canvas id="mainChart"></canvas>
</div>

</div>

<!-- MAP -->
<div class="panel">
<div id="map"></div>
</div>

<!-- RESERVED -->
<div class="panel reserved">
RESERVED
</div>

</div>

<script>

/* ---------- MAP ---------- */
var map = L.map('map').setView([13.732862,100.776348],15);

L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{
    attribution:'© OpenStreetMap'
}).addTo(map);

L.marker([13.732862,100.776348]).addTo(map);


/* ---------- GRAPH ---------- */

let ctx = document.getElementById("mainChart");

let chart = new Chart(ctx,{
    type:"line",
    data:{
        labels:[1,2,3,4,5,6,7,8],
        datasets:[{
            label:"Altitude (m)",
            data:[170,175,180,185,182,170,160,179],
            borderColor:"#00ff9c",
            tension:0.3
        }]
    },
    options:{
        responsive:true,
        maintainAspectRatio:false,
        plugins:{
            legend:{labels:{color:"white"}}
        },
        scales:{
            x:{ticks:{color:"white"}},
            y:{ticks:{color:"white"}}
        }
    }
});

function showGraph(type){

    let label="";
    let data=[];
    let color="";

    if(type==="alt"){
        label="Altitude (m)";
        data=[170,175,180,185,182,170,160,179];
        color="#00ff9c";
    }

    if(type==="temp"){
        label="Temperature (°C)";
        data=[23,23.1,23.3,23.4,23.2,23.0,23.1,23.3];
        color="#ffaa00";
    }

    if(type==="press"){
        label="Pressure (hPa)";
        data=[999,998.8,998.5,998.2,998.4,998.7,998.9,998.2];
        color="#00c8ff";
    }

    if(type==="volt"){
        label="Voltage (V)";
        data=[6.8,6.78,6.76,6.75,6.74,6.73,6.74,6.74];
        color="#ff4d6d";
    }

    chart.data.datasets[0].label = label;
    chart.data.datasets[0].data = data;
    chart.data.datasets[0].borderColor = color;
    chart.update();
}

</script>

</body>
</html>
